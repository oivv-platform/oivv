<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MePont | Community-Powered Fashion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .cursor-grab {
            cursor: grab;
        }
        .cursor-grabbing {
            cursor: grabbing;
        }
        .blur-background {
            filter: blur(4px);
            transition: filter 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Mock Data: Represents the state that would come from a database
        const MOCK_CAMPAIGNS = [
            // Pre-Order Items
            { id: 1, name: 'The Milano Linen Blazer', designer: 'Studio Rossi', price: 85, stage: 'PRE_ORDER', productionRound: 2, category: 'Blazers', heroImage: 'https://placehold.co/800x1000/e2e8f0/4a5568?text=Milano+Blazer', images: [ 'https://placehold.co/800x1000/e2e8f0/4a5568?text=Front', 'https://placehold.co/800x1000/d1d5db/4a5568?text=Side+View', 'https://placehold.co/800x1000/9ca3af/4a5568?text=Fabric+Detail' ], video: {thumbnail: 'https://placehold.co/800x1000/64748b/ffffff?text=Video', url: 'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4'}, details: 'Crafted from 100% organic Italian linen, this blazer offers a relaxed yet structured fit. Perfect for summer evenings and smart-casual events. Features natural horn buttons and a silk-blend lining.', factory: 'Made ethically in Porto, Portugal by a family-owned facility known for its exceptional tailoring.', preOrderDetails: { fundingType: 'INDEPENDENT', daysLeft: 12, sizes: { 'S': { moq: 50, funded: 50 }, 'M': { moq: 100, funded: 98 }, 'L': { moq: 100, funded: 35 }, 'XL': { moq: 50, funded: 2 } } }, priceBreakdown: { materials: 35, manufacturing: 31, designer: 10, platform: 8.5 }, productPassport: [ { type: 'Fabric', name: 'Main Body', composition: '100% Organic Linen', origin: 'Emilia-Romagna, Italy', certifications: ['European Flax® Certified'] }, { type: 'Fabric', name: 'Lining', composition: '50% Cupro, 50% Viscose', origin: 'Como, Italy' }, { type: 'Hardware', name: 'Buttons', composition: 'Natural Horn', origin: 'Parma, Italy' } ], sizeGuide: { fitDetails: 'Relaxed, unstructured fit. Designed to be worn comfortably over a shirt. Consider sizing down for a slimmer fit.', sizes: { 'S': { 'Chest': '38"', 'Sleeve': '25"', 'Length': '28"' }, 'M': { 'Chest': '40"', 'Sleeve': '25.5"', 'Length': '28.5"' }, 'L': { 'Chest': '42"', 'Sleeve': '26"', 'Length': '29"' }, 'XL': { 'Chest': '44"', 'Sleeve': '26.5"', 'Length': '29.5"' }, } }, comments: [{user: 'Julia S.', comment: 'So excited for Round 2!'}], reviews: [ { user: 'Alex R.', rating: 5, comment: 'Received this from the first round. The quality is absolutely insane for the price. The linen is soft, not scratchy at all.'}, { user: 'Beatrice L.', rating: 4, comment: 'Beautiful blazer, though it runs a little large. I would recommend sizing down if you are between sizes.'}, ] },
            { id: 7, name: 'The Nomad Travel Shirt', designer: 'Wayfarer Co.', price: 65, stage: 'PRE_ORDER', productionRound: 1, category: 'Tops', heroImage: 'https://placehold.co/800x1000/f3f4f6/1f2937?text=Nomad+Shirt', images: ['https://placehold.co/800x1000/f3f4f6/1f2937?text=Front', 'https://placehold.co/800x1000/e5e7eb/1f2937?text=Detail', 'https://placehold.co/800x1000/d1d5db/1f2937?text=On+Model'], video: {thumbnail: 'https://placehold.co/800x1000/9ca3af/ffffff?text=Video', url: 'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4'}, details: 'The only shirt you need. Made from a technical merino wool blend that is wrinkle-resistant, anti-odor, and temperature regulating.', preOrderDetails: { fundingType: 'COMBINED', daysLeft: 18, overallMoq: 200, sizes: { 'S': { funded: 30 }, 'M': { funded: 65 }, 'L': { funded: 40 }, 'XL': { funded: 15 } } }, priceBreakdown: { materials: 25, manufacturing: 22, designer: 10, platform: 6.5 }, productPassport: [ { type: 'Fabric', name: 'Main Body', composition: '87% Merino Wool, 13% Nylon', origin: 'Australia (Wool), Japan (Milling)'}, ], sizeGuide: { fitDetails: 'Modern athletic fit. Not too slim, not too loose.', sizes: { 'S': { 'Chest': '38"', 'Length': '28"' }, 'M': { 'Chest': '40"', 'Length': '29"' }, 'L': { 'Chest': '42"', 'Length': '30"' }, 'XL': { 'Chest': '44"', 'Length': '30.5"' }, } }, comments: [], reviews: [], },
            { id: 8, name: 'The Tokyo Selvedge Denim', designer: 'Kuroki Mills', price: 120, stage: 'PRE_ORDER', productionRound: 1, category: 'Denim', heroImage: 'https://placehold.co/800x1000/374151/e5e7eb?text=Tokyo+Denim', images: ['https://placehold.co/800x1000/374151/e5e7eb?text=Front', 'https://placehold.co/800x1000/4b5563/e5e7eb?text=Back', 'https://placehold.co/800x1000/6b7280/e5e7eb?text=Detail'], video: null, details: 'Classic straight-leg jean made from 14oz Japanese selvedge denim from the famed Kuroki Mills. Raw and ready to be broken in.', preOrderDetails: { fundingType: 'COMBINED', daysLeft: 25, overallMoq: 150, sizes: { '30': { funded: 20 }, '31': { funded: 25 }, '32': { funded: 30 }, '33': { funded: 10 }, '34': { funded: 5 } } }, priceBreakdown: { materials: 50, manufacturing: 40, designer: 15, platform: 15 }, productPassport: [ { type: 'Fabric', name: 'Main Body', composition: '100% Cotton Selvedge Denim', origin: 'Okayama, Japan' } ], sizeGuide: { fitDetails: 'Classic straight fit. Will shrink slightly after first wash.', sizes: { '30': { 'Waist': '31"', 'Inseam': '34"' }, '32': { 'Waist': '33"', 'Inseam': '34"' }, '34': { 'Waist': '35"', 'Inseam': '34"' } } }, comments: [], reviews: [], },
            { id: 9, name: 'The Riviera Slip Dress', designer: 'Atelier Élise', price: 95, stage: 'PRE_ORDER', productionRound: 1, category: 'Dresses', heroImage: 'https://placehold.co/800x1000/fef2f2/991b1b?text=Riviera+Dress', images: ['https://placehold.co/800x1000/fef2f2/991b1b?text=Front', 'https://placehold.co/800x1000/fee2e2/991b1b?text=Side'], video: null, details: 'An elegant bias-cut slip dress made from pure silk. Drapes beautifully and feels incredible against the skin.', preOrderDetails: { fundingType: 'INDEPENDENT', daysLeft: 8, sizes: { 'XS': { moq: 30, funded: 10 }, 'S': { moq: 50, funded: 45 }, 'M': { moq: 50, funded: 12 }, 'L': { moq: 20, funded: 2 } } }, priceBreakdown: { materials: 40, manufacturing: 35, designer: 12, platform: 8 }, productPassport: [ { type: 'Fabric', name: 'Main Body', composition: '100% Mulberry Silk', origin: 'Zhejiang, China' } ], sizeGuide: { fitDetails: 'Bias cut for a figure-skimming fit.', sizes: { 'S': { 'Bust': '34"', 'Waist': '27"', 'Length': '45"' }, 'M': { 'Bust': '36"', 'Waist': '29"', 'Length': '45.5"' } } }, comments: [], reviews: [], },

            // Sampling Items
            { id: 6, name: 'The Aegean Polo Shirt', designer: 'Maritime Co.', price: 45, stage: 'SAMPLING', productionRound: 1, samplingDaysLeft: 7, category: 'Tops', heroImage: 'https://placehold.co/800x1000/e0f2fe/0c4a6e?text=Aegean+Polo', images: ['https://placehold.co/800x1000/e0f2fe/0c4a6e?text=Aegean+Polo'], video: null, details: 'A premium polo made from piqué knit sea-island cotton for exceptional softness and breathability. The sample is currently being perfected.', priceBreakdown: { materials: 18, manufacturing: 15, designer: 5, platform: 4.5 }, productPassport: [ { type: 'Fabric', name: 'Main Body', composition: '100% Sea Island Cotton', origin: 'Caribbean' }, { type: 'Hardware', name: 'Buttons', composition: 'Mother of Pearl', origin: 'Vietnam' } ], sizeGuide: { fitDetails: 'Classic fit, true to size.', sizes: { 'S': { 'Chest': '37"', 'Length': '27"' }, 'M': { 'Chest': '39"', 'Length': '27.5"' }, 'L': { 'Chest': '41"', 'Length': '28"' }, 'XL': { 'Chest': '43"', 'Length': '28.5"' }, } }, comments: [], reviews: [], },
            { id: 10, name: 'The Alpine Down Parka', designer: 'Northbound', price: 250, stage: 'SAMPLING', productionRound: 1, samplingDaysLeft: 21, category: 'Outerwear', heroImage: 'https://placehold.co/800x1000/111827/d1d5db?text=Alpine+Parka', images: ['https://placehold.co/800x1000/111827/d1d5db?text=Alpine+Parka'], video: null, details: 'A serious parka for serious cold. Filled with 800-fill power goose down and a waterproof shell.', priceBreakdown: { materials: 100, manufacturing: 80, designer: 40, platform: 30 }, productPassport: [ { type: 'Fabric', name: 'Shell', composition: '2L Gore-Tex Infinium', origin: 'USA' }, { type: 'Insulation', name: 'Down', composition: '800-fill Power Goose Down', origin: 'Poland' } ], sizeGuide: { fitDetails: 'Regular fit, designed to be worn over layers.', sizes: { 'S': { 'Chest': '42"' }, 'M': { 'Chest': '45"' }, 'L': { 'Chest': '48"' } } }, comments: [], reviews: [], },
            { id: 11, name: 'The Artist\'s Smock', designer: 'Form & Function', price: 70, stage: 'SAMPLING', productionRound: 1, samplingDaysLeft: 14, category: 'Dresses', heroImage: 'https://placehold.co/800x1000/fafaf9/3f3f46?text=Artist+Smock', images: ['https://placehold.co/800x1000/fafaf9/3f3f46?text=Artist+Smock'], video: null, details: 'A durable and functional smock dress made from heavy-duty cotton canvas. Perfect for the studio or as a unique layering piece.', priceBreakdown: { materials: 30, manufacturing: 25, designer: 8, platform: 7 }, productPassport: [ { type: 'Fabric', name: 'Body', composition: '100% Cotton Canvas', origin: 'USA' } ], sizeGuide: { fitDetails: 'Oversized, A-line fit.', sizes: { 'One Size': { 'Bust': '50"', 'Length': '40"' } } }, comments: [], reviews: [], },

            // Design Items
            { id: 5, name: 'The Lisbon Tech Chino', designer: 'Urban Form', price: 75, stage: 'DESIGN', productionRound: 1, likes: 412, targetLikes: 500, category: 'Trousers', heroImage: 'https://placehold.co/800x1000/d1fae5/065f46?text=Lisbon+Chino', images: ['https://placehold.co/800x1000/d1fae5/065f46?text=Front', 'https://placehold.co/800x1000/bbf7d0/065f46?text=Back', 'https://placehold.co/800x1000/86efac/065f46?text=Fabric'], video: {thumbnail: 'https://placehold.co/800x1000/4ade80/ffffff?text=Video', url: 'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerFun.mp4'}, details: 'A classic chino silhouette made with a modern, water-repellent stretch fabric. Designed for comfort and versatility, from the office to the weekend.', priceBreakdown: { materials: 28, manufacturing: 27, designer: 10, platform: 7.5 }, productPassport: [ { type: 'Fabric', name: 'Main Body', composition: '98% Organic Cotton, 2% Elastane', origin: 'Izmir, Turkey', certifications: ['GOTS Certified Organic Cotton', 'OEKO-TEX Standard 100'] }, { type: 'Hardware', name: 'Zipper', composition: 'YKK NATULON® (Recycled PET)', origin: 'Japan'}, { type: 'Hardware', name: 'Button', composition: 'Corozo (nut-based)', origin: 'Ecuador'} ], sizeGuide: { fitDetails: 'Slim fit with a gentle taper from knee to ankle. Offers slight stretch for comfort.', sizes: { '30': { 'Waist': '31"', 'Inseam': '32"', 'Thigh': '23"', 'Leg Opening': '14"' }, '32': { 'Waist': '33"', 'Inseam': '32"', 'Thigh': '24"', 'Leg Opening': '14.5"' }, '34': { 'Waist': '35"', 'Inseam': '32"', 'Thigh': '25"', 'Leg Opening': '15"' }, '36': { 'Waist': '37"', 'Inseam': '32"', 'Thigh': '26"', 'Leg Opening': '15.5"' }, } }, comments: [{user: 'Mark P.', comment: 'This looks amazing! I hope it gets made.'}], reviews: [], },
            { id: 12, name: 'The Shetland Sweater', designer: 'Highland Knitwear', price: 110, stage: 'DESIGN', productionRound: 1, likes: 289, targetLikes: 400, category: 'Tops', heroImage: 'https://placehold.co/800x1000/e0e7ff/3730a3?text=Shetland+Sweater', images: ['https://placehold.co/800x1000/e0e7ff/3730a3?text=Shetland+Sweater'], video: null, details: 'A timeless crewneck sweater, knitted in Scotland from genuine Shetland wool. Incredibly warm and durable.', priceBreakdown: { materials: 45, manufacturing: 40, designer: 15, platform: 10 }, productPassport: [ { type: 'Fabric', name: 'Yarn', composition: '100% Shetland Wool', origin: 'Shetland Islands, UK' } ], sizeGuide: { fitDetails: 'Classic, regular fit.', sizes: { 'S': { 'Chest': '40"' }, 'M': { 'Chest': '42"' }, 'L': { 'Chest': '44"' } } }, comments: [], reviews: [], },
            { id: 13, name: 'The Field Jacket', designer: 'Patina Goods', price: 180, stage: 'DESIGN', productionRound: 1, likes: 450, targetLikes: 500, category: 'Outerwear', heroImage: 'https://placehold.co/800x1000/f7fee7/3f6212?text=Field+Jacket', images: ['https://placehold.co/800x1000/f7fee7/3f6212?text=Field+Jacket'], video: null, details: 'A rugged field jacket made from durable waxed canvas that will develop a unique patina over time.', priceBreakdown: { materials: 70, manufacturing: 60, designer: 25, platform: 25 }, productPassport: [ { type: 'Fabric', name: 'Body', composition: '12oz Waxed Cotton Canvas', origin: 'United Kingdom' } ], sizeGuide: { fitDetails: 'Roomy fit for layering.', sizes: { 'S': { 'Chest': '44"' }, 'M': { 'Chest': '46"' }, 'L': { 'Chest': '48"' } } }, comments: [], reviews: [], },
            { id: 14, name: 'The Linen Workshirt', designer: 'Utility Co.', price: 75, stage: 'DESIGN', productionRound: 1, likes: 150, targetLikes: 400, category: 'Tops', heroImage: 'https://placehold.co/800x1000/f5f5f4/3f3f46?text=Linen+Workshirt', images: ['https://placehold.co/800x1000/f5f5f4/3f3f46?text=Linen+Workshirt'], video: null, details: 'A versatile overshirt made from sturdy Irish linen. Perfect as a light jacket or a layering piece.', priceBreakdown: { materials: 30, manufacturing: 28, designer: 10, platform: 7 }, productPassport: [ { type: 'Fabric', name: 'Body', composition: '100% Irish Linen', origin: 'Baird McNutt, Ireland' } ], sizeGuide: { fitDetails: 'Regular fit.', sizes: { 'S': { 'Chest': '41"' }, 'M': { 'Chest': '43"' }, 'L': { 'Chest': '45"' } } }, comments: [], reviews: [], },
            { id: 15, name: 'The Pleated Trouser', designer: 'Formale', price: 90, stage: 'DESIGN', productionRound: 1, likes: 320, targetLikes: 450, category: 'Trousers', heroImage: 'https://placehold.co/800x1000/dcfce7/14532d?text=Pleated+Trouser', images: ['https://placehold.co/800x1000/dcfce7/14532d?text=Pleated+Trouser'], video: null, details: 'A modern take on a classic pleated trouser, with a high waist and a tapered leg. Made from a fine wool blend.', priceBreakdown: { materials: 40, manufacturing: 30, designer: 12, platform: 8 }, productPassport: [ { type: 'Fabric', name: 'Body', composition: '95% Wool, 5% Elastane', origin: 'Italy' } ], sizeGuide: { fitDetails: 'High-waisted, relaxed through the thigh with a tapered ankle.', sizes: { '30': { 'Waist': '30"' }, '32': { 'Waist': '32"' }, '34': { 'Waist': '34"' } } }, comments: [], reviews: [], },
            { id: 16, name: 'The Silk Scarf', designer: 'Como Prints', price: 50, stage: 'DESIGN', productionRound: 1, likes: 80, targetLikes: 200, category: 'Accessories', heroImage: 'https://placehold.co/800x1000/fdf4ff/701a75?text=Silk+Scarf', images: ['https://placehold.co/800x1000/fdf4ff/701a75?text=Silk+Scarf'], video: null, details: 'A large, luxurious scarf made from pure silk twill, printed with an original artistic design.', priceBreakdown: { materials: 20, manufacturing: 15, designer: 10, platform: 5 }, productPassport: [ { type: 'Fabric', name: 'Body', composition: '100% Silk Twill', origin: 'Como, Italy' } ], sizeGuide: { fitDetails: '90cm x 90cm square.', sizes: { 'One Size': { 'Dimensions': '90cm x 90cm' } } }, comments: [], reviews: [], },
            { id: 17, name: 'The Denim Jacket', designer: 'American Workwear', price: 130, stage: 'PRE_ORDER', productionRound: 3, category: 'Denim', heroImage: 'https://placehold.co/800x1000/dbeafe/1e3a8a?text=Denim+Jacket', images: ['https://placehold.co/800x1000/dbeafe/1e3a8a?text=Denim+Jacket'], video: null, details: 'The iconic trucker jacket, made from durable 13.5oz cone mills denim. A true classic that only gets better with age.', preOrderDetails: { fundingType: 'COMBINED', daysLeft: 30, overallMoq: 100, sizes: { 'S': { funded: 25 }, 'M': { funded: 40 }, 'L': { funded: 15 }, 'XL': { funded: 5 } } }, priceBreakdown: { materials: 55, manufacturing: 45, designer: 15, platform: 15 }, productPassport: [ { type: 'Fabric', name: 'Body', composition: '13.5oz Cone Mills White Oak Denim', origin: 'USA' } ], sizeGuide: { fitDetails: 'Classic fit, sits at the hip.', sizes: { 'S': { 'Chest': '40"' }, 'M': { 'Chest': '42"' }, 'L': { 'Chest': '44"' } } }, comments: [], reviews: [], },
            { id: 18, name: 'The Cashmere Beanie', designer: 'Soft Goods', price: 60, stage: 'SAMPLING', productionRound: 1, samplingDaysLeft: 10, category: 'Accessories', heroImage: 'https://placehold.co/800x1000/e5e7eb/1f2937?text=Cashmere+Beanie', images: ['https://placehold.co/800x1000/e5e7eb/1f2937?text=Cashmere+Beanie'], video: null, details: 'The softest beanie you will ever own. Knitted from pure Mongolian cashmere.', priceBreakdown: { materials: 25, manufacturing: 20, designer: 8, platform: 7 }, productPassport: [ { type: 'Fabric', name: 'Yarn', composition: '100% Mongolian Cashmere', origin: 'Mongolia' } ], sizeGuide: { fitDetails: 'One size fits most.', sizes: { 'One Size': {} } }, comments: [], reviews: [], },
            { id: 19, name: 'The Wrap Skirt', designer: 'Vacanza', price: 80, stage: 'DESIGN', productionRound: 1, likes: 210, targetLikes: 350, category: 'Dresses', heroImage: 'https://placehold.co/800x1000/fff7ed/c2410c?text=Wrap+Skirt', images: ['https://placehold.co/800x1000/fff7ed/c2410c?text=Wrap+Skirt'], video: null, details: 'A simple, elegant wrap skirt made from a lightweight Tencel fabric. Perfect for warm weather.', priceBreakdown: { materials: 30, manufacturing: 25, designer: 15, platform: 10 }, productPassport: [ { type: 'Fabric', name: 'Body', composition: '100% Tencel™ Lyocell', origin: 'Austria' } ], sizeGuide: { fitDetails: 'Adjustable wrap fit.', sizes: { 'S': { 'Waist': '26-28"' }, 'M': { 'Waist': '29-31"' }, 'L': { 'Waist': '32-34"' } } }, comments: [], reviews: [], },
            { id: 20, name: 'The Leather Tote', designer: 'Artisan Bags', price: 220, stage: 'PRE_ORDER', productionRound: 1, category: 'Accessories', heroImage: 'https://placehold.co/800x1000/d1d5db/1f2937?text=Leather+Tote', images: ['https://placehold.co/800x1000/d1d5db/1f2937?text=Leather+Tote'], video: null, details: 'A beautiful and durable tote bag made from full-grain Italian vegetable-tanned leather.', preOrderDetails: { fundingType: 'COMBINED', daysLeft: 40, overallMoq: 50, sizes: { 'One Size': { funded: 15 } } }, priceBreakdown: { materials: 100, manufacturing: 70, designer: 30, platform: 20 }, productPassport: [ { type: 'Fabric', name: 'Leather', composition: 'Full-Grain Vegetable Tanned Leather', origin: 'Tuscany, Italy' } ], sizeGuide: { fitDetails: 'Large enough to hold a 15" laptop.', sizes: { 'One Size': { 'Dimensions': '15" x 13" x 6"' } } }, comments: [], reviews: [], },
            { id: 21, name: 'The Oxford Shirt', designer: 'The Standard', price: 68, stage: 'SAMPLING', productionRound: 2, samplingDaysLeft: 5, category: 'Tops', heroImage: 'https://placehold.co/800x1000/eff6ff/5b21b6?text=Oxford+Shirt', images: ['https://placehold.co/800x1000/eff6ff/5b21b6?text=Oxford+Shirt'], video: null, details: 'A perfectly cut Oxford cloth button-down shirt. A wardrobe staple.', priceBreakdown: { materials: 25, manufacturing: 25, designer: 10, platform: 8 }, productPassport: [ { type: 'Fabric', name: 'Body', composition: '100% Cotton Oxford Cloth', origin: 'Portugal' } ], sizeGuide: { fitDetails: 'Slim fit.', sizes: { 'S': { 'Chest': '39"' }, 'M': { 'Chest': '41"' }, 'L': { 'Chest': '43"' } } }, comments: [], reviews: [], },
            { id: 22, name: 'The Wool Overshirt', designer: 'North Sea Co.', price: 140, stage: 'DESIGN', productionRound: 1, likes: 380, targetLikes: 450, category: 'Outerwear', heroImage: 'https://placehold.co/800x1000/4b5563/e5e7eb?text=Wool+Overshirt', images: ['https://placehold.co/800x1000/4b5563/e5e7eb?text=Wool+Overshirt'], video: null, details: 'A heavy, warm overshirt made from a dense Melton wool. Can be worn as a shirt or a jacket.', priceBreakdown: { materials: 60, manufacturing: 50, designer: 15, platform: 15 }, productPassport: [ { type: 'Fabric', name: 'Body', composition: '80% Wool, 20% Nylon', origin: 'United Kingdom' } ], sizeGuide: { fitDetails: 'Regular, boxy fit.', sizes: { 'S': { 'Chest': '43"' }, 'M': { 'Chest': '45"' }, 'L': { 'Chest': '47"' } } }, comments: [], reviews: [], },
            { id: 23, name: 'The Canvas Sneaker', designer: 'Step Lightly', price: 55, stage: 'PRE_ORDER', productionRound: 1, category: 'Accessories', heroImage: 'https://placehold.co/800x1000/f3f4f6/111827?text=Canvas+Sneaker', images: ['https://placehold.co/800x1000/f3f4f6/111827?text=Canvas+Sneaker'], video: null, details: 'A simple, comfortable canvas sneaker with a natural rubber sole. Made with recycled materials.', preOrderDetails: { fundingType: 'INDEPENDENT', daysLeft: 20, sizes: { '8': { moq: 50, funded: 30 }, '9': { moq: 100, funded: 80 }, '10': { moq: 100, funded: 60 }, '11': { moq: 50, funded: 10 } } }, priceBreakdown: { materials: 20, manufacturing: 20, designer: 5, platform: 10 }, productPassport: [ { type: 'Fabric', name: 'Upper', composition: '100% Recycled Cotton Canvas', origin: 'Spain' }, { type: 'Sole', name: 'Sole', composition: 'Natural Rubber', origin: 'Vietnam' } ], sizeGuide: { fitDetails: 'True to size.', sizes: { '9': { 'Length': '10.5"' }, '10': { 'Length': '11"' }, '11': { 'Length': '11.5"' } } }, comments: [], reviews: [], },
        ];

        // SVG Icons for UI elements
        const PlayIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M8 5v14l11-7z"></path></svg>;
        const CubeIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>;
        const HomeIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>;
        const UserIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>;
        const XIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>;
        const HeartIcon = ({ className, isFilled }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill={isFilled ? "currentColor" : "none"} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>;
        const ArrowRightIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>;
        const StarIcon = ({ className, isFilled }) => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill={isFilled ? "currentColor" : "none"} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>;

        // Main App Component: Manages state and routing
        function App() {
            const [currentScreen, setCurrentScreen] = useState('Home');
            const [campaigns, setCampaigns] = useState(MOCK_CAMPAIGNS);
            const [pledgedItems, setPledgedItems] = useState([]);
            const [likedItems, setLikedItems] = useState([]);
            const [showPledgeModal, setShowPledgeModal] = useState(false);
            const [show3DModal, setShow3DModal] = useState(false);
            const [showMediaModal, setShowMediaModal] = useState({ visible: false, startIndex: 0 });
            const [showCampaignModal, setShowCampaignModal] = useState(null);

            const isModalOpen = showPledgeModal || show3DModal || showMediaModal.visible || !!showCampaignModal;
            const isNestedModalOpen = (!!showCampaignModal) && (showPledgeModal || show3DModal || showMediaModal.visible);
            
            const hasPurchased = (campaignId) => pledgedItems.some(item => item.id === campaignId);

            const navigateTo = (screen) => {
                setShowCampaignModal(null);
                setCurrentScreen(screen);
            }

            const viewCampaignDetail = (campaign) => {
                setShowCampaignModal(campaign);
            };
            
            const handleLike = (campaignId) => {
                setLikedItems(prev => prev.includes(campaignId) ? prev.filter(id => id !== campaignId) : [...prev, campaignId]);
                setCampaigns(prevCampaigns =>
                    prevCampaigns.map(c => {
                        if (c.id === campaignId) {
                            const isLiked = !likedItems.includes(campaignId);
                            return { ...c, likes: isLiked ? c.likes + 1 : c.likes - 1 };
                        }
                        return c;
                    })
                );
            };

            const handlePledge = (campaign, size) => {
                const newPledge = { ...campaign, size, productionStatus: 'Funded' };
                setPledgedItems(prev => [...prev, newPledge]);
                setCampaigns(prevCampaigns =>
                    prevCampaigns.map(c => {
                        if (c.id === campaign.id && c.stage === 'PRE_ORDER') {
                            const updatedSizes = { ...c.preOrderDetails.sizes };
                            if(updatedSizes[size]) {
                                updatedSizes[size].funded += 1;
                            }
                            return { ...c, preOrderDetails: { ...c.preOrderDetails, sizes: updatedSizes }};
                        }
                        return c;
                    })
                );
                setShowPledgeModal(false);
            };
            
            const addComment = (campaignId, commentText) => {
                const newComment = { user: 'You', comment: commentText };
                setCampaigns(prev => prev.map(c => 
                    c.id === campaignId ? {...c, comments: [...c.comments, newComment]} : c
                ));
            };
            
            const addReview = (campaignId, review) => {
                const newReview = { user: 'You', ...review };
                setCampaigns(prev => prev.map(c => 
                    c.id === campaignId ? {...c, reviews: [...c.reviews, newReview]} : c
                ));
            };

            const renderScreen = () => {
                switch (currentScreen) {
                case 'Home':
                    return <HomeScreen campaigns={campaigns} onCampaignSelect={viewCampaignDetail} onLike={handleLike} likedItems={likedItems} />;
                case 'Dashboard':
                    return <DashboardScreen pledgedItems={pledgedItems} />;
                default:
                    return <HomeScreen campaigns={campaigns} onCampaignSelect={viewCampaignDetail} onLike={handleLike} likedItems={likedItems} />;
                }
            };

            return (
                <div className="w-full min-h-screen">
                    <div className={isModalOpen && !isNestedModalOpen ? 'blur-background' : ''}>
                        <div className="max-w-7xl mx-auto pb-16 sm:pb-0">
                            <TopNavBar onNavigate={navigateTo} />
                            <main>
                                {renderScreen()}
                            </main>
                            <BottomNavBar currentScreen={currentScreen} onNavigate={navigateTo} />
                        </div>
                    </div>
                    {showCampaignModal && 
                        <CampaignDetailModal 
                            campaign={showCampaignModal} 
                            onPledge={() => setShowPledgeModal(true)} 
                            onBack={() => setShowCampaignModal(null)}
                            onLike={handleLike}
                            isLiked={likedItems.includes(showCampaignModal.id)}
                            hasPurchased={hasPurchased(showCampaignModal.id)}
                            onCommentSubmit={addComment}
                            onReviewSubmit={addReview}
                            onShow3D={() => setShow3DModal(true)}
                            onShowMedia={(startIndex) => setShowMediaModal({ visible: true, startIndex })}
                            isNestedModalOpen={isNestedModalOpen}
                        />
                    }
                    {showPledgeModal && <PledgeModal campaign={showCampaignModal} onClose={() => setShowPledgeModal(false)} onPledge={handlePledge} />}
                    {show3DModal && <ThreeDModal onClose={() => setShow3DModal(false)} />}
                    {showMediaModal.visible && <MediaViewerModal campaign={showCampaignModal} startIndex={showMediaModal.startIndex} onClose={() => setShowMediaModal({ visible: false, startIndex: 0 })} />}
                </div>
            );
        }

        function ThreeDViewer() {
            const mountRef = useRef(null);
            const isDragging = useRef(false);
            const previousPointerPosition = useRef({ x: 0, y: 0 });
            const initialPinchDistance = useRef(0);

            useEffect(() => {
                const currentMount = mountRef.current;
                if (!currentMount) return;

                const scene = new THREE.Scene();
                scene.background = new THREE.Color(0xf1f5f9);
                const camera = new THREE.PerspectiveCamera(50, currentMount.clientWidth / currentMount.clientHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ antialias: true });
                renderer.setSize(currentMount.clientWidth, currentMount.clientHeight);
                currentMount.appendChild(renderer.domElement);

                const geometry = new THREE.TorusKnotGeometry(10, 3, 100, 16);
                const material = new THREE.MeshStandardMaterial({ color: 0x3b82f6, roughness: 0.5, metalness: 0.2 });
                const torusKnot = new THREE.Mesh(geometry, material);
                scene.add(torusKnot);

                const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
                scene.add(ambientLight);
                const pointLight = new THREE.PointLight(0xffffff, 0.8);
                pointLight.position.set(25, 50, 25);
                scene.add(pointLight);

                camera.position.z = 30;

                const getPointerCoordinates = (event) => {
                    return event.touches ? { x: event.touches[0].clientX, y: event.touches[0].clientY } : { x: event.clientX, y: event.clientY };
                };

                const getPinchDistance = (event) => {
                    const dx = event.touches[0].clientX - event.touches[1].clientX;
                    const dy = event.touches[0].clientY - event.touches[1].clientY;
                    return Math.sqrt(dx * dx + dy * dy);
                };

                const onPointerDown = (e) => {
                    if (e.touches && e.touches.length === 2) {
                        initialPinchDistance.current = getPinchDistance(e);
                        isDragging.current = false;
                    } else {
                        isDragging.current = true;
                        currentMount.classList.add('cursor-grabbing');
                        const coords = getPointerCoordinates(e);
                        previousPointerPosition.current = { x: coords.x, y: coords.y };
                    }
                };

                const onPointerUp = (e) => {
                    isDragging.current = false;
                    initialPinchDistance.current = 0;
                    currentMount.classList.remove('cursor-grabbing');
                };

                const onPointerMove = (e) => {
                    e.preventDefault(); 
                    if (e.touches && e.touches.length === 2) {
                        const newPinchDistance = getPinchDistance(e);
                        const delta = newPinchDistance - initialPinchDistance.current;
                        camera.position.z -= delta * 0.1;
                        camera.position.z = Math.max(15, Math.min(camera.position.z, 50));
                        initialPinchDistance.current = newPinchDistance;
                    } else if (isDragging.current) {
                        const coords = getPointerCoordinates(e);
                        const deltaMove = {
                            x: coords.x - previousPointerPosition.current.x,
                            y: coords.y - previousPointerPosition.current.y
                        };
                        const deltaRotationQuaternion = new THREE.Quaternion().setFromEuler(
                            new THREE.Euler((deltaMove.y * Math.PI) / 180, (deltaMove.x * Math.PI) / 180, 0, 'XYZ')
                        );
                        torusKnot.quaternion.multiplyQuaternions(deltaRotationQuaternion, torusKnot.quaternion);
                        previousPointerPosition.current = { x: coords.x, y: coords.y };
                    }
                };
                
                const onWheel = (e) => {
                    camera.position.z += e.deltaY * 0.05; // Increased sensitivity
                    camera.position.z = Math.max(15, Math.min(camera.position.z, 50));
                };

                currentMount.addEventListener('mousedown', onPointerDown);
                window.addEventListener('mouseup', onPointerUp);
                window.addEventListener('mousemove', onPointerMove);
                
                currentMount.addEventListener('touchstart', onPointerDown, { passive: false });
                window.addEventListener('touchend', onPointerUp);
                window.addEventListener('touchmove', onPointerMove, { passive: false });

                currentMount.addEventListener('wheel', onWheel, { passive: false });

                const animate = function () { requestAnimationFrame(animate); renderer.render(scene, camera); };
                animate();
                
                const handleResize = () => {
                    if (currentMount) {
                        camera.aspect = currentMount.clientWidth / currentMount.clientHeight;
                        camera.updateProjectionMatrix();
                        renderer.setSize(currentMount.clientWidth, currentMount.clientHeight);
                    }
                }
                window.addEventListener('resize', handleResize);

                return () => {
                    window.removeEventListener('resize', handleResize);
                    window.removeEventListener('mouseup', onPointerUp);
                    window.removeEventListener('mousemove', onPointerMove);
                    window.removeEventListener('touchend', onPointerUp);
                    window.removeEventListener('touchmove', onPointerMove);
                    if(currentMount && renderer.domElement) {
                       currentMount.removeChild(renderer.domElement);
                    }
                };
            }, []);
            return <div ref={mountRef} className="w-full h-full cursor-grab"></div>;
        }

        function HomeScreen({ campaigns, onCampaignSelect, onLike, likedItems }) {
            const [selectedCategory, setSelectedCategory] = useState('All');
            const categories = ['All', 'Outerwear', 'Blazers', 'Trousers', 'Tops', 'Denim', 'Dresses', 'Accessories'];
            const filteredCampaigns = campaigns.filter(campaign => selectedCategory === 'All' || campaign.category === selectedCategory);
            return (
                <div className="p-4 sm:p-6 lg:p-8">
                <header className="mb-8 text-center">
                    <h1 className="text-4xl sm:text-5xl font-extrabold tracking-tight text-gray-900">MePont</h1>
                    <p className="mt-2 text-lg text-gray-600">Community-powered fashion. Sell then make.</p>
                </header>
                <div className="mb-8">
                    <div className="flex justify-center flex-wrap gap-2">
                    {categories.map(category => (
                        <button key={category} onClick={() => setSelectedCategory(category)} className={`px-4 py-2 rounded-full font-semibold text-sm transition-colors whitespace-nowrap ${selectedCategory === category ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 shadow-sm hover:bg-gray-50'}`}>
                        {category}
                        </button>
                    ))}
                    </div>
                </div>
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    {filteredCampaigns.map(campaign => ( <CampaignCard key={campaign.id} campaign={campaign} onSelect={onCampaignSelect} onLike={onLike} isLiked={likedItems.includes(campaign.id)} /> ))}
                </div>
                </div>
            );
        };

        function CampaignDetailModal({ campaign, onPledge, onBack, onLike, isLiked, hasPurchased, onCommentSubmit, onReviewSubmit, onShow3D, onShowMedia, isNestedModalOpen }) {
            const [show, setShow] = useState(false);
            const [activeTab, setActiveTab] = useState('Details');
            const [selectedSize, setSelectedSize] = useState(Object.keys(campaign.sizeGuide.sizes)[0]);
            
            const mediaItems = [ ...[...new Set([campaign.heroImage, ...campaign.images])].map(img => ({ type: 'image', url: img, thumbnail: img })), ...(campaign.video ? [{ type: 'video', url: campaign.video.url, thumbnail: campaign.video.thumbnail }] : []) ];
            const [currentMediaIndex, setCurrentMediaIndex] = useState(0);
            const [isFading, setIsFading] = useState(false);
            
            const touchStartX = useRef(0);
            const touchEndX = useRef(0);
            const hasSwiped = useRef(false);

            useEffect(() => {
                const timer = setTimeout(() => setShow(true), 10);
                return () => clearTimeout(timer);
            }, []);

            const handleClose = () => {
                setShow(false);
                setTimeout(onBack, 300);
            };

            const handleTouchStart = (e) => {
                touchStartX.current = e.targetTouches[0].clientX;
                hasSwiped.current = false;
            };
            const handleTouchMove = (e) => {
                touchEndX.current = e.targetTouches[0].clientX;
                if (Math.abs(touchStartX.current - touchEndX.current) > 10) {
                    hasSwiped.current = true;
                }
            };
            const handleTouchEnd = () => {
                const swipeDistance = touchStartX.current - touchEndX.current;
                if (Math.abs(swipeDistance) > 50) { // Swipe detected
                    const direction = swipeDistance > 0 ? 1 : -1;
                    const newIndex = Math.max(0, Math.min(currentMediaIndex + direction, mediaItems.length - 1));
                    if (newIndex !== currentMediaIndex) {
                        setIsFading(true);
                        setTimeout(() => {
                            setCurrentMediaIndex(newIndex);
                            setIsFading(false);
                        }, 150);
                    }
                }
            };
            
            const handleMediaClick = (index) => {
                if (!hasSwiped.current) {
                    onShowMedia(index);
                }
            };

            const DetailsPanel = ({isMobile = false}) => (
                <div className={isMobile ? "bg-white rounded-lg shadow-lg self-start" : "lg:col-span-2 bg-white rounded-lg shadow-lg self-start"}>
                    <div className="p-5 border-b">
                        <div className="flex justify-between items-center">
                            <p className="text-sm text-gray-500">{campaign.designer}</p>
                            {campaign.stage === 'PRE_ORDER' && <p className="text-sm font-semibold text-gray-500">Round {campaign.productionRound}</p>}
                        </div>
                        <h2 className="text-3xl font-bold">{campaign.name}</h2>
                    </div>
                    
                    {renderTopSection()}
                    
                    <div className="px-5 pb-5">
                        <div className="flex border-b overflow-x-auto scrollbar-hide">
                            {['Details', 'Price Breakdown', 'Size & Fit', 'Community'].map(tab => (
                                <button key={tab} onClick={() => setActiveTab(tab)} className={`py-2 px-4 font-semibold text-sm whitespace-nowrap ${activeTab === tab ? 'border-b-2 border-blue-600 text-blue-600' : 'text-gray-500'}`}>
                                    {tab}
                                </button>
                            ))}
                        </div>
                        <div className="py-4">
                        {renderTabContent()}
                        </div>
                    </div>
                </div>
            );

            const renderTabContent = () => {
                switch(activeTab) {
                    case 'Details': return ( <div> <p className="text-gray-700 mb-6">{campaign.details}</p> <h4 className="font-bold text-md mb-3">Product Passport</h4> <div className="space-y-4"> {campaign.productPassport.map((section, index) => ( <div key={index} className="bg-gray-100 p-4 rounded-lg"> <h5 className="font-semibold mb-2">{section.type}: <span className="font-normal">{section.name}</span></h5> <div className="space-y-1 text-sm"> <div className="flex justify-between"><span className="text-gray-600">Composition</span><span className="font-medium text-right">{section.composition}</span></div> <div className="flex justify-between"><span className="text-gray-600">Origin</span><span className="font-medium text-right">{section.origin}</span></div> {section.certifications && section.certifications.length > 0 && ( <div className="text-right"> <span className="text-gray-600 float-left">Certifications</span> <ul className="list-disc list-inside inline-block text-left"> {section.certifications.map(cert => <li key={cert} className="font-medium">{cert}</li>)} </ul> </div> )} </div> </div> ))} </div> </div> );
                    case 'Price Breakdown': const totalCost = Object.values(campaign.priceBreakdown).reduce((sum, val) => sum + val, 0); return ( <div> <p className="text-gray-700 mb-4 text-sm">We believe in radical transparency. Here's the true cost of making this garment.</p> <div className="space-y-3 mb-6"> {Object.entries(campaign.priceBreakdown).map(([key, value]) => { const percentage = (value / campaign.price) * 100; return ( <div key={key}> <div className="flex justify-between text-sm mb-1"> <span className="capitalize text-gray-600">{key}</span> <span className="font-semibold">€{value.toFixed(2)}</span> </div> <div className="w-full bg-gray-200 rounded-full h-2"> <div className="bg-blue-500 h-2 rounded-full" style={{width: `${percentage}%`}}></div> </div> </div> ) })} </div> <div className="border-t pt-4"> <div className="flex justify-between text-sm mb-2"> <span className="text-gray-600">True Cost</span> <span className="font-semibold">€{totalCost.toFixed(2)}</span> </div> <div className="flex justify-between text-md font-bold"> <span>Our Price</span> <span>€{campaign.price.toFixed(2)}</span> </div> </div> <div className="mt-6 bg-gray-100 p-3 rounded-lg text-sm text-gray-600"> <p><strong>Please Note:</strong> The final price at checkout will include an estimate for shipping and any applicable import duties based on your delivery address. This will be clearly displayed before you confirm your pledge.</p> </div> </div> );
                    case 'Size & Fit': return ( <div> <p className="text-gray-700 mb-4">{campaign.sizeGuide.fitDetails}</p> <div className="flex space-x-2 mb-4 overflow-x-auto pb-2 scrollbar-hide"> {Object.keys(campaign.sizeGuide.sizes).map(size => ( <button key={size} onClick={() => setSelectedSize(size)} className={`px-3 py-1.5 rounded-lg border-2 transition-all text-sm font-semibold ${selectedSize === size ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-gray-700 border-gray-200'}`}> {size} </button> ))} </div> <div className="bg-gray-100 p-4 rounded-lg space-y-2 text-sm"> <h5 className="font-bold mb-2">Measurements for Size {selectedSize}</h5> {Object.entries(campaign.sizeGuide.sizes[selectedSize]).map(([key, value]) => ( <div key={key} className="flex justify-between"> <span className="text-gray-600">{key}</span> <span className="font-semibold">{value}</span> </div> ))} </div> </div> );
                    case 'Community': return ( <div className="space-y-6"> <div> <h4 className="font-bold text-md mb-3">Reviews</h4> {campaign.reviews.length > 0 ? ( <div className="space-y-4"> {campaign.reviews.map((review, index) => ( <div key={index} className="border-b pb-4"> <div className="flex items-center mb-1"> {[...Array(5)].map((_, i) => <StarIcon key={i} className="w-4 h-4 text-yellow-500" isFilled={i < review.rating} />)} <span className="ml-2 font-bold">{review.user}</span> </div> <p className="text-gray-700">{review.comment}</p> </div> ))} </div> ) : ( <p className="text-gray-500 text-sm py-2">No reviews yet.</p> )} {hasPurchased && <ReviewForm campaignId={campaign.id} onSubmit={onReviewSubmit} />} </div> <div> <h4 className="font-bold text-md mb-3">Comments</h4> {campaign.comments.length > 0 ? ( <div className="space-y-4"> {campaign.comments.map((comment, index) => ( <div key={index} className="border-b pb-4"> <p className="font-bold text-sm">{comment.user}</p> <p className="text-gray-700">{comment.comment}</p> </div> ))} </div> ) : ( <p className="text-gray-500 text-sm py-2">No comments yet. Be the first!</p> )} <CommentForm campaignId={campaign.id} onSubmit={onCommentSubmit} /> </div> </div> );
                    default: return null;
                }
            };
            
            const renderTopSection = () => {
                const actionButtonClass = "w-full mt-4 font-bold py-4 rounded-xl shadow-lg transition-all flex items-center justify-center space-x-2";
                const secondaryButtonClass = "w-full mt-2 font-semibold py-3 rounded-xl transition-all flex items-center justify-center space-x-2 bg-gray-200 hover:bg-gray-300 text-gray-800";
                const mainActions = () => {
                    switch(campaign.stage) {
                        case 'DESIGN': return ( <button onClick={() => onLike(campaign.id)} className={`${actionButtonClass} ${isLiked ? 'bg-pink-600 text-white' : 'bg-white text-pink-600 border-2 border-pink-600'}`}> <HeartIcon className="w-6 h-6" isFilled={isLiked} /> <span>{isLiked ? 'Liked' : 'Like to Fund Sampling'}</span> </button> );
                        case 'SAMPLING': return ( <button className={`${actionButtonClass} bg-cyan-600 text-white cursor-default`}> Notify Me When Live </button> );
                        case 'PRE_ORDER': return ( <button onClick={onPledge} className={`${actionButtonClass} bg-blue-600 text-white hover:bg-blue-700`}> Pledge Now for €{campaign.price} </button> );
                        default: return null;
                    }
                }
                return (
                    <div className="p-5 border-b">
                        {campaign.stage === 'DESIGN' && ( <> <div className="w-full bg-gray-200 rounded-full h-2"> <div className="bg-pink-500 h-2 rounded-full" style={{ width: `${(campaign.likes / campaign.targetLikes) * 100}%` }}></div> </div> <div className="flex justify-between items-center text-sm text-gray-600 mt-2"> <span>{campaign.likes} / {campaign.targetLikes} likes to sample</span> </div> </> )}
                        {campaign.stage === 'SAMPLING' && ( <div className="bg-cyan-50 text-cyan-800 p-4 rounded-lg text-center mb-4"> <p className="font-semibold">Sample in Progress</p> <p className="text-sm">{campaign.samplingDaysLeft} days until reveal</p> </div> )}
                        {campaign.stage === 'PRE_ORDER' && ( campaign.preOrderDetails.fundingType === 'COMBINED' ? ( <> <div className="w-full bg-gray-200 rounded-full h-2.5"> <div className="bg-blue-600 h-2.5 rounded-full" style={{ width: `${(Object.values(campaign.preOrderDetails.sizes).reduce((acc, size) => acc + size.funded, 0) / campaign.preOrderDetails.overallMoq) * 100}%` }}></div> </div> <div className="flex justify-between items-center text-sm text-gray-600 mt-2"> <span>{Object.values(campaign.preOrderDetails.sizes).reduce((acc, size) => acc + size.funded, 0)} / {campaign.preOrderDetails.overallMoq} Funded</span> <span className="font-semibold">{campaign.preOrderDetails.daysLeft} days left</span> </div> </> ) : ( <> <div className="flex justify-between items-center text-sm text-gray-600 mb-4"> <span className="font-semibold">Funding Ends in {campaign.preOrderDetails.daysLeft} days</span> <span className="font-bold text-lg">€{campaign.price}</span> </div> <div className="space-y-3 mb-4"> <h4 className="font-semibold text-sm text-gray-800">Fund each size independently:</h4> {Object.entries(campaign.preOrderDetails.sizes).map(([size, data]) => { const progress = (data.funded / data.moq) * 100; const isFunded = progress >= 100; return ( <div key={size}> <div className={`flex justify-between items-center mb-1 text-xs ${isFunded ? 'text-green-600 font-semibold' : 'text-gray-600'}`}> <span className="font-semibold">{size}</span> <span>{data.funded} / {data.moq}</span> </div> <div className="w-full bg-gray-200 rounded-full h-2"> <div className={`${isFunded ? 'bg-green-600' : 'bg-blue-600'} h-2 rounded-full`} style={{ width: `${Math.min(progress, 100)}%` }}></div> </div> </div> ); })} </div> </> ) )}
                        {mainActions()}
                        <button onClick={onShow3D} className={secondaryButtonClass}> <CubeIcon className="w-5 h-5 mr-2" /> View in 3D </button>
                    </div>
                );
            };

            return (
                <div className={`fixed inset-0 bg-white z-50 overflow-y-auto transition-transform duration-300 ease-in-out ${show ? 'translate-y-0' : 'translate-y-full'}`}>
                   <div className={isNestedModalOpen ? 'blur-background' : ''}>
                        <div className="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
                            <button onClick={handleClose} className="mb-6 text-sm font-semibold text-blue-600 hover:text-blue-800 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="mr-2"><path d="M19 12H5"></path><polyline points="12 19 5 12 12 5"></polyline></svg>
                                Back to all drops
                            </button>
                            {/* Desktop Layout */}
                            <div className="hidden lg:grid lg:grid-cols-5 lg:gap-12">
                                <div className="lg:col-span-3 flex gap-4">
                                    <div className="flex flex-col space-y-2">
                                        {mediaItems.map((media, index) => (
                                            <button key={index} onClick={() => setCurrentMediaIndex(index)} className={`w-16 h-20 flex-shrink-0 rounded-md overflow-hidden border-2 relative ${currentMediaIndex === index ? 'border-blue-600' : 'border-transparent'}`}>
                                                <img src={media.thumbnail} className="w-full h-full object-cover" />
                                                {media.type === 'video' && <div className="absolute inset-0 bg-black/30 flex items-center justify-center"><PlayIcon className="w-6 h-6 text-white" /></div>}
                                            </button>
                                        ))}
                                    </div>
                                    <div className="flex-1 h-[80vh]">
                                        <button className="w-full h-full" onClick={() => onShowMedia(currentMediaIndex)}>
                                            {mediaItems[currentMediaIndex].type === 'video' ? (
                                                <video key={mediaItems[currentMediaIndex].url} src={mediaItems[currentMediaIndex].url} controls className="w-full h-full object-cover rounded-lg shadow-lg bg-black"></video>
                                            ) : (
                                                <img src={mediaItems[currentMediaIndex].url} alt="Product view" className="w-full h-full object-cover rounded-lg shadow-lg" />
                                            )}
                                        </button>
                                    </div>
                                </div>
                                <DetailsPanel />
                            </div>

                            {/* Mobile Layout */}
                            <div className="lg:hidden">
                                <div className="mb-6" onTouchStart={handleTouchStart} onTouchMove={handleTouchMove} onTouchEnd={handleTouchEnd} onClick={() => handleMediaClick(currentMediaIndex)}>
                                    <div className={`aspect-w-3 aspect-h-4 mb-2 transition-opacity duration-150 ${isFading ? 'opacity-0' : 'opacity-100'}`}>
                                        {mediaItems[currentMediaIndex].type === 'video' ? (
                                            <video key={mediaItems[currentMediaIndex].url} src={mediaItems[currentMediaIndex].url} controls className="w-full h-full object-cover rounded-lg shadow-lg bg-black"></video>
                                        ) : (
                                            <img src={mediaItems[currentMediaIndex].url} alt="Product view" className="w-full h-full object-cover rounded-lg shadow-lg" />
                                        )}
                                    </div>
                                    <div className="flex justify-center items-center space-x-2">
                                        {mediaItems.map((_, index) => (
                                            <div key={index} className={`w-2 h-2 rounded-full ${currentMediaIndex === index ? 'bg-blue-600' : 'bg-gray-300'}`}></div>
                                        ))}
                                    </div>
                                </div>
                                <DetailsPanel isMobile={true} />
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        function CommentForm({ campaignId, onSubmit }) {
            const [comment, setComment] = useState('');
            const handleSubmit = (e) => {
                e.preventDefault();
                if(comment.trim()) {
                    onSubmit(campaignId, comment);
                    setComment('');
                }
            }
            return (
                <form onSubmit={handleSubmit} className="mt-4">
                    <textarea value={comment} onChange={(e) => setComment(e.target.value)} className="w-full p-2 border rounded-lg text-sm" placeholder="Add a comment..."></textarea>
                    <button type="submit" className="mt-2 px-4 py-2 bg-gray-200 text-gray-800 font-semibold rounded-lg text-sm">Post Comment</button>
                </form>
            );
        };

        function ReviewForm({ campaignId, onSubmit }) {
            const [rating, setRating] = useState(5);
            const [comment, setComment] = useState('');
            const handleSubmit = (e) => {
                e.preventDefault();
                if(comment.trim()) {
                    onSubmit(campaignId, { rating, comment });
                    setComment('');
                    setRating(5);
                }
            }
            return (
                <form onSubmit={handleSubmit} className="mt-6 p-4 border-t">
                    <h5 className="font-bold mb-2">Write a Review</h5>
                    <div className="flex items-center mb-2">
                        {[...Array(5)].map((_, i) => <button type="button" key={i} onClick={() => setRating(i+1)}><StarIcon className={`w-6 h-6 ${i < rating ? 'text-yellow-500' : 'text-gray-300'}`} isFilled={i < rating} /></button>)}
                    </div>
                    <textarea value={comment} onChange={(e) => setComment(e.target.value)} className="w-full p-2 border rounded-lg text-sm" placeholder="Share your thoughts on the fit and quality..."></textarea>
                    <button type="submit" className="mt-2 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg text-sm">Submit Review</button>
                </form>
            );
        };

        function CampaignCard({ campaign, onSelect, onLike, isLiked }) {
            const renderCardContent = () => {
                switch (campaign.stage) {
                case 'DESIGN':
                    const likeProgress = (campaign.likes / campaign.targetLikes) * 100;
                    return (
                    <div className="p-4">
                        <div className="flex justify-between items-start">
                            <p className="text-sm text-gray-500">{campaign.designer}</p>
                            <span className="font-bold text-lg">€{campaign.price}</span>
                        </div>
                        <h3 className="font-bold text-xl truncate -mt-1">{campaign.name}</h3>
                        <div className="mt-4">
                        <div className="w-full bg-gray-200 rounded-full h-2">
                            <div className="bg-pink-500 h-2 rounded-full" style={{ width: `${likeProgress}%` }}></div>
                        </div>
                        <div className="flex justify-between items-center text-sm text-gray-600 mt-2">
                            <span>{campaign.likes} / {campaign.targetLikes} likes</span>
                            <button onClick={(e) => { e.stopPropagation(); onLike(campaign.id); }} className={`flex items-center space-x-1 font-semibold transition-colors ${isLiked ? 'text-pink-600' : 'text-gray-500'}`}>
                            <HeartIcon className="w-4 h-4" isFilled={isLiked} />
                            <span>{isLiked ? 'Liked' : 'Like'}</span>
                            </button>
                        </div>
                        </div>
                    </div>
                    );
                case 'SAMPLING':
                    return (
                    <div className="p-4">
                        <div className="flex justify-between items-start">
                            <p className="text-sm text-gray-500">{campaign.designer}</p>
                            <span className="font-bold text-lg">€{campaign.price}</span>
                        </div>
                        <h3 className="font-bold text-xl truncate -mt-1">{campaign.name}</h3>
                        <div className="mt-4 bg-cyan-50 text-cyan-800 p-3 rounded-lg text-center">
                        <p className="font-semibold">Sample in Progress</p>
                        <p className="text-sm">{campaign.samplingDaysLeft} days until reveal</p>
                        </div>
                    </div>
                    );
                case 'PRE_ORDER':
                    const totalFunded = Object.values(campaign.preOrderDetails.sizes).reduce((acc, size) => acc + size.funded, 0);
                    const totalMoq = campaign.preOrderDetails.fundingType === 'COMBINED' 
                        ? campaign.preOrderDetails.overallMoq 
                        : Object.values(campaign.preOrderDetails.sizes).reduce((acc, size) => acc + size.moq, 0);
                    const fundProgress = totalMoq > 0 ? (totalFunded / totalMoq) * 100 : 0;
                    return (
                    <div className="p-4">
                        <div className="flex justify-between items-start">
                            <p className="text-sm text-gray-500">{campaign.designer}</p>
                            <span className="font-bold text-lg">€{campaign.price}</span>
                        </div>
                        <h3 className="font-bold text-xl truncate -mt-1">{campaign.name}</h3>
                        <div className="mt-4">
                        <div className="w-full bg-gray-200 rounded-full h-2">
                            <div className="bg-blue-600 h-2 rounded-full" style={{ width: `${fundProgress}%` }}></div>
                        </div>
                        <div className="flex justify-between text-sm text-gray-600 mt-2">
                            <span>{Math.floor(fundProgress)}% Funded Overall</span>
                            <span>{campaign.preOrderDetails.daysLeft} days left</span>
                        </div>
                        </div>
                    </div>
                    );
                default:
                    return null;
                }
            };

            return (
                <div onClick={() => onSelect(campaign)} className="bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer transition-transform hover:-translate-y-1 group">
                <div className="h-80 relative">
                    <img src={campaign.heroImage} alt={campaign.name} className="w-full h-full object-cover" />
                    <div className="absolute top-3 right-3 bg-white/80 backdrop-blur-sm text-xs font-bold px-3 py-1.5 rounded-full flex items-center space-x-1.5 shadow-sm">
                    <span className={
                        campaign.stage === 'DESIGN' ? 'text-pink-600' :
                        campaign.stage === 'SAMPLING' ? 'text-cyan-600' :
                        'text-blue-600'
                    }>{campaign.stage.replace('_', ' ')}</span>
                    
                    {campaign.stage === 'DESIGN' && (
                        <>
                        <ArrowRightIcon className="w-4 h-4 text-gray-400" />
                        <span className="text-gray-500">SAMPLING</span>
                        </>
                    )}
                    {campaign.stage === 'SAMPLING' && (
                        <>
                        <ArrowRightIcon className="w-4 h-4 text-gray-400" />
                        <span className="text-gray-500">PRE-ORDER</span>
                        </>
                    )}
                    </div>
                    {campaign.stage === 'PRE_ORDER' && (
                        <div className="absolute bottom-3 left-3 bg-white/80 backdrop-blur-sm text-xs font-bold px-2 py-1 rounded-full shadow-sm">
                            Round {campaign.productionRound}
                        </div>
                    )}
                </div>
                {renderCardContent()}
                </div>
            );
        };

        function ThreeDModal({ onClose }) {
            const [show, setShow] = useState(false);
            useEffect(() => { const timer = setTimeout(() => setShow(true), 10); return () => clearTimeout(timer); }, []);
            const handleClose = () => { setShow(false); setTimeout(onClose, 300); };
            return (
                <div className={`fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 transition-opacity duration-300 ease-in-out ${show ? 'opacity-100' : 'opacity-0'}`} onClick={handleClose}>
                    <div className={`w-full h-full max-w-4xl max-h-[80vh] bg-slate-200 rounded-2xl shadow-2xl relative transform transition-all duration-300 ease-in-out overflow-hidden ${show ? 'opacity-100 scale-100' : 'opacity-0 scale-95'}`} onClick={(e) => e.stopPropagation()}>
                        <button onClick={handleClose} className="absolute top-4 right-4 text-gray-800 bg-white/50 rounded-full p-2 hover:bg-white z-10"> <XIcon className="w-6 h-6" /> </button>
                        <ThreeDViewer />
                    </div>
                </div>
            );
        }

        function MediaViewerModal({ campaign, startIndex, onClose }) {
            const mediaItems = [ ...[...new Set([campaign.heroImage, ...campaign.images])].map(img => ({ type: 'image', url: img, thumbnail: img })), ...(campaign.video ? [{ type: 'video', url: campaign.video.url, thumbnail: campaign.video.thumbnail }] : []) ];
            const [currentIndex, setCurrentIndex] = useState(startIndex);
            const [show, setShow] = useState(false);

            useEffect(() => {
                const timer = setTimeout(() => setShow(true), 10);
                return () => clearTimeout(timer);
            }, []);

            const handleClose = () => {
                setShow(false);
                setTimeout(onClose, 300);
            };

            return (
                <div className={`fixed inset-0 bg-black/80 z-50 flex flex-col items-center justify-center p-4 transition-opacity duration-300 ease-in-out ${show ? 'opacity-100' : 'opacity-0'}`} onClick={handleClose}>
                    <button onClick={handleClose} className="absolute top-4 right-4 text-white bg-black/30 rounded-full p-2 hover:bg-black/50 z-10">
                        <XIcon className="w-6 h-6" />
                    </button>
                    <div className={`w-full h-full max-w-5xl max-h-[80vh] flex items-center justify-center transform transition-all duration-300 ease-in-out ${show ? 'opacity-100 scale-100' : 'opacity-0 scale-95'}`} onClick={(e) => e.stopPropagation()}>
                        {mediaItems[currentIndex].type === 'video' ? (
                            <video key={mediaItems[currentIndex].url} src={mediaItems[currentIndex].url} controls autoPlay className="max-w-full max-h-full object-contain rounded-lg"></video>
                        ) : (
                            <img src={mediaItems[currentIndex].url} alt="Full screen product view" className="max-w-full max-h-full object-contain rounded-lg" />
                        )}
                    </div>
                    <div className={`mt-4 flex space-x-2 overflow-x-auto scrollbar-hide transform transition-all duration-300 ease-in-out ${show ? 'opacity-100' : 'opacity-0'}`} onClick={(e) => e.stopPropagation()}>
                        {mediaItems.map((media, index) => (
                            <button key={index} onClick={() => setCurrentIndex(index)} className={`w-16 h-20 flex-shrink-0 rounded-md overflow-hidden border-2 relative ${currentIndex === index ? 'border-white' : 'border-transparent'}`}>
                                <img src={media.thumbnail} className="w-full h-full object-cover" />
                                {media.type === 'video' && <div className="absolute inset-0 bg-black/30 flex items-center justify-center"><PlayIcon className="w-6 h-6 text-white" /></div>}
                            </button>
                        ))}
                    </div>
                </div>
            );
        }

        function PledgeModal({ campaign, onClose, onPledge }) {
            const [show, setShow] = useState(false);
            const [selectedSize, setSelectedSize] = useState(Object.keys(campaign.preOrderDetails.sizes)[0]);
            const isCombinedFunding = campaign.preOrderDetails.fundingType === 'COMBINED';
            useEffect(() => { const timer = setTimeout(() => setShow(true), 10); return () => clearTimeout(timer); }, []);
            const handleClose = () => { setShow(false); setTimeout(onClose, 300); };
            let combinedProgress = 0; let totalFunded = 0;
            if (isCombinedFunding) { totalFunded = Object.values(campaign.preOrderDetails.sizes).reduce((acc, size) => acc + size.funded, 0); combinedProgress = campaign.preOrderDetails.overallMoq > 0 ? (totalFunded / campaign.preOrderDetails.overallMoq) * 100 : 0; }
            return (
                <div className={`fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 transition-opacity duration-300 ease-in-out ${show ? 'opacity-100' : 'opacity-0'}`} onClick={handleClose}>
                    <div className={`bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6 relative transform transition-all duration-300 ease-in-out ${show ? 'opacity-100 scale-100' : 'opacity-0 scale-95'}`} onClick={(e) => e.stopPropagation()}>
                        <button onClick={handleClose} className="absolute top-4 right-4 text-gray-400 hover:text-gray-600"> <XIcon className="w-6 h-6" /> </button>
                        <h2 className="font-bold text-2xl mb-2">{campaign.name}</h2>
                        <p className="text-lg text-gray-600 mb-6">€{campaign.price}</p>
                        {isCombinedFunding && ( <div className="mb-4"> <h3 className="font-semibold text-sm mb-2">Overall Funding Progress</h3> <div className="w-full bg-gray-200 rounded-full h-2.5"> <div className="bg-blue-600 h-2.5 rounded-full" style={{ width: `${combinedProgress}%` }}></div> </div> <div className="flex justify-between items-center text-xs text-gray-600 mt-1"> <span>{totalFunded} / {campaign.preOrderDetails.overallMoq} Funded</span> <span className="font-semibold">{campaign.preOrderDetails.daysLeft} days left</span> </div> </div> )}
                        <div className="mb-4"> <h3 className="font-semibold text-sm mb-3">{isCombinedFunding ? 'Pledges by Size' : 'Funding Progress by Size'}</h3> <div className="space-y-3"> {Object.entries(campaign.preOrderDetails.sizes).map(([size, data]) => { if (isCombinedFunding) { return ( <div key={size} className="flex justify-between items-center text-sm py-1"> <span className="font-medium text-gray-800">{size}</span> <span className="text-gray-600 font-semibold">{data.funded} pledged</span> </div> ) } const moq = data.moq; const progress = moq ? (data.funded / moq) * 100 : 0; const isFunded = moq && progress >= 100; return ( <div key={size}> <div className={`flex justify-between items-center mb-1 text-xs ${isFunded ? 'text-green-600 font-semibold' : 'text-gray-600'}`}> <span className="font-semibold">{size}</span> {moq && <span>{data.funded} / {moq}</span>} </div> {moq && <div className="w-full bg-gray-200 rounded-full h-2"> <div className={`${isFunded ? 'bg-green-600' : 'bg-blue-600'} h-2 rounded-full`} style={{ width: `${Math.min(progress, 100)}%` }}></div> </div>} </div> ); })} </div> </div>
                        <div className="mb-6"> <h3 className="font-semibold text-sm mb-2">Select Size to Pledge For</h3> <div className="flex space-x-2 overflow-x-auto pb-2 scrollbar-hide"> {Object.keys(campaign.preOrderDetails.sizes).map(size => ( <button key={size} onClick={() => setSelectedSize(size)} className={`px-3 py-1.5 rounded-lg border-2 transition-all text-sm font-semibold ${selectedSize === size ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-gray-700 border-gray-200'}`}> {size} </button> ))} </div> </div>
                        <div className="bg-blue-50 border-l-4 border-blue-400 p-3 rounded-r-lg mb-6"> <p className="text-sm text-blue-800">Your card will only be charged if the funding goal is met.</p> </div>
                        <button onClick={() => onPledge(campaign, selectedSize)} className="w-full bg-blue-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-blue-700 transition-all"> Confirm Pledge for Size {selectedSize} </button>
                    </div>
                </div>
            );
        };

        function TopNavBar({ onNavigate }) {
            return (
                <header className="bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-40">
                    <nav className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="flex justify-between items-center h-16">
                            <div className="flex-shrink-0">
                                <button onClick={() => onNavigate('Home')} className="text-2xl font-bold text-gray-900">MePont</button>
                            </div>
                            <div className="hidden sm:block sm:ml-6">
                                <div className="flex space-x-4">
                                    <button onClick={() => onNavigate('Home')} className="text-gray-700 hover:bg-gray-200 px-3 py-2 rounded-md text-sm font-medium">Drops</button>
                                    <button onClick={() => onNavigate('Dashboard')} className="text-gray-700 hover:bg-gray-200 px-3 py-2 rounded-md text-sm font-medium">My MePont</button>
                                </div>
                            </div>
                        </div>
                    </nav>
                </header>
            );
        }

        function BottomNavBar({ currentScreen, onNavigate }) {
            return (
                <div className="sm:hidden bg-white/80 backdrop-blur-sm border-t border-gray-200 flex justify-around p-2 fixed bottom-0 w-full z-40">
                    <button onClick={() => onNavigate('Home')} className={`flex flex-col items-center space-y-1 p-2 rounded-lg w-full ${currentScreen === 'Home' ? 'text-blue-600' : 'text-gray-500'}`}>
                        <HomeIcon className="w-6 h-6" />
                        <span className="text-xs font-semibold">Drops</span>
                    </button>
                    <button onClick={() => onNavigate('Dashboard')} className={`flex flex-col items-center space-y-1 p-2 rounded-lg w-full ${currentScreen === 'Dashboard' ? 'text-blue-600' : 'text-gray-500'}`}>
                        <UserIcon className="w-6 h-6" />
                        <span className="text-xs font-semibold">My MePont</span>
                    </button>
                </div>
            );
        };

        function DashboardScreen({ pledgedItems }) {
            const productionSteps = ['Funded', 'Fabric Sourced', 'In Production', 'Quality Check', 'Shipped'];
            return (
                <div className="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8">
                    <header className="mb-8">
                        <h1 className="text-3xl font-bold tracking-tight">My MePont</h1>
                        <p className="text-gray-500">Your pledges and orders.</p>
                    </header>
                    {pledgedItems.length === 0 ? (
                        <div className="text-center py-20 bg-white rounded-lg shadow">
                            <p className="text-gray-500">You haven't pledged for any items yet.</p>
                        </div>
                    ) : (
                        <div className="space-y-6">
                            {pledgedItems.map((item, index) => (
                                <div key={index} className="bg-white p-4 rounded-lg shadow-md">
                                    <div className="flex items-center space-x-4 mb-4">
                                        <img src={item.heroImage} alt={item.name} className="w-20 h-24 object-cover rounded-md" />
                                        <div>
                                            <p className="font-bold">{item.name}</p>
                                            <p className="text-sm text-gray-600">Size: {item.size}</p>
                                            <p className="text-sm text-gray-600">Price: €{item.price}</p>
                                        </div>
                                    </div>
                                    <div>
                                        <h4 className="font-semibold mb-2 text-sm">Production Status</h4>
                                        <div className="flex items-center justify-between space-x-1">
                                            {productionSteps.map((step, stepIndex) => {
                                                const currentStepIndex = productionSteps.indexOf(item.productionStatus);
                                                const isCompleted = stepIndex <= currentStepIndex;
                                                return (
                                                    <div key={step} className="flex-1 flex flex-col items-center">
                                                        <div className={`w-6 h-6 rounded-full flex items-center justify-center ${isCompleted ? 'bg-blue-600' : 'bg-gray-200'}`}>
                                                            {isCompleted && <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>}
                                                        </div>
                                                        <p className={`text-xs mt-1 text-center ${isCompleted ? 'font-semibold text-blue-600' : 'text-gray-500'}`}>{step}</p>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
